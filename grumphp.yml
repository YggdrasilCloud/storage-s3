grumphp:
    stop_on_failure: true
    hide_circumvention_tip: true
    process_timeout: 300

    environment:
        variables:
            EXEC_GRUMPHP_COMMAND: 'docker compose run --rm app'

    tasks:
        phplint:
            jobs: 10
            triggered_by: ['php']

        phpcsfixer:
            config: .php-cs-fixer.dist.php
            triggered_by: ['php']
            config_contains_finder: true

        phpstan:
            configuration: phpstan.neon
            memory_limit: '1G'
            triggered_by: ['php']

        phpunit:
            config_file: phpunit.xml.dist
            testsuite: Unit
            always_execute: true

        infection:
            configuration: infection.json5
            threads: 4
            test_framework: phpunit
            triggered_by: ['php']
